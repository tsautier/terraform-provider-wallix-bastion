---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "{{ .Name }} {{ .Type }} - {{ .ProviderName }}"
subcategory: ""
description: |-
  {{ .Description | plainmarkdown | trimspace | prefixlines "  " }}
---

# {{ .Name }} ({{ .Type | title }})

Provides a localdomain resource linked to device.

## Example Usage

```terraform
# Basic device local domain
resource "wallix-bastion_device_localdomain" "server_local" {
  device_id   = wallix-bastion_device.server1.id
  domain_name = "local"
  description = "Local domain for server1"
}

# Local domain with password change capability
resource "wallix-bastion_device_localdomain" "server_managed" {
  device_id                       = wallix-bastion_device.server2.id
  domain_name                     = "managed_local"
  description                     = "Managed local domain with password change"
  enable_password_change          = true
  password_change_policy          = "strong_policy"
  password_change_plugin          = "local_plugin"
  password_change_plugin_parameters = jsonencode({
    method = "local"
    complexity = "high"
  })
}

# Local domain with SSH Certificate Authority
resource "wallix-bastion_device_localdomain" "ssh_ca_domain" {
  device_id      = wallix-bastion_device.server3.id
  domain_name    = "ssh_ca_local"
  description    = "Local domain with SSH CA"
  ca_private_key = "generate:RSA_4096"
  passphrase     = "MySecurePassphrase123"
}

# Local domain with existing SSH key
resource "wallix-bastion_device_localdomain" "existing_key" {
  device_id      = wallix-bastion_device.server4.id
  domain_name    = "existing_ssh"
  description    = "Domain with existing SSH key"
  ca_private_key = file("/path/to/ca_private_key")
  passphrase     = var.ca_passphrase
}
```

{{ .SchemaMarkdown | trimspace }}

## Usage Notes

### Domain Scope

Local domains are device-specific, unlike global domains which are shared across devices.

### Password Management

When `enable_password_change = true`, configure:
- **password_change_policy**: Reference to password policy
- **password_change_plugin**: Plugin for password operations
- **password_change_plugin_parameters**: JSON configuration for the plugin

### SSH Certificate Authority

Configure SSH CA for certificate-based authentication:

**Auto-generation options:**
- `generate:RSA_1024`, `generate:RSA_2048`, `generate:RSA_4096`, `generate:RSA_8192`
- `generate:DSA_1024`
- `generate:ECDSA_256`, `generate:ECDSA_384`, `generate:ECDSA_521`
- `generate:ED25519`

**Security considerations:**
- Use strong key types (RSA_4096 or ED25519 recommended)
- Always use a passphrase to protect the private key
- Store passphrases securely (use variables, not hardcoded)

### Account Management

After creating a local domain, add accounts:

```terraform
resource "wallix-bastion_device_localdomain_account" "admin" {
  device_id     = wallix-bastion_device_localdomain.server_local.device_id
  domain_id     = wallix-bastion_device_localdomain.server_local.id
  account_name  = "administrator"
  account_login = "admin"
}
```

### Read-Only Attributes

- **id**: Internal domain ID for referencing in other resources
- **ca_public_key**: SSH CA public key (generated from private key)

### Common Use Cases

1. **Basic Local Access**: Simple local domain for device-specific accounts
2. **Managed Passwords**: Enable automatic password rotation
3. **SSH Certificates**: Certificate-based SSH authentication
4. **Isolated Environments**: Separate domains for different environments

## Import

Localdomain linked to device can be imported using an id made up of `<device_id>/<domain_name>`, e.g.

```shell
terraform import wallix-bastion_device_localdomain.server_local xxxxxxxx/local
```
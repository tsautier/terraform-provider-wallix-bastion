---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "wallix-bastion_device_localdomain_account Resource - terraform-provider-wallix-bastion"
subcategory: ""
description: |-
    
---

# wallix-bastion_device_localdomain_account (Resource)

Provides a localdomain account resource linked to device account.

## Example Usage

```terraform
# Basic device local domain account
resource "wallix-bastion_device_localdomain_account" "admin" {
  device_id     = wallix-bastion_device.server1.id
  domain_id     = wallix-bastion_device_localdomain.local.id
  account_name  = "administrator"
  account_login = "admin"
  description   = "Local administrator account"
}

# Account with password management
resource "wallix-bastion_device_localdomain_account" "service" {
  device_id         = wallix-bastion_device.server2.id
  domain_id         = wallix-bastion_device_localdomain.managed.id
  account_name      = "service_account"
  account_login     = "svcuser"
  description       = "Service account with managed password"
  auto_change_password = true
  can_edit_certificate_validity = true
  certificate_validity = "30d"
}

# Account with SSH key authentication
resource "wallix-bastion_device_localdomain_account" "ssh_user" {
  device_id     = wallix-bastion_device.server3.id
  domain_id     = wallix-bastion_device_localdomain.ssh_ca.id
  account_name  = "ssh_operator"
  account_login = "operator"
  description   = "SSH key-based authentication"
  services      = ["ssh", "sftp"]
}

# Account with multiple services
resource "wallix-bastion_device_localdomain_account" "multi_service" {
  device_id     = wallix-bastion_device.database.id
  domain_id     = wallix-bastion_device_localdomain.db_local.id
  account_name  = "db_admin"
  account_login = "dbadmin"
  description   = "Database administrator with multiple protocols"
  services      = ["ssh", "telnet", "rlogin", "vnc", "rdp"]
}

# Complete account with all options
resource "wallix-bastion_device_localdomain_account" "complete" {
  device_id                       = wallix-bastion_device.server4.id
  domain_id                       = wallix-bastion_device_localdomain.complete.id
  account_name                    = "complete_user"
  account_login                   = "cuser"
  description                     = "Complete account configuration"
  auto_change_password            = true
  auto_change_ssh_key             = true
  can_edit_certificate_validity   = true
  certificate_validity            = "7d"
  checkout_policy                 = "strict_checkout"
  services                        = ["ssh", "rdp", "vnc"]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `account_login` (String)
- `account_name` (String)
- `device_id` (String)
- `domain_id` (String)

### Optional

- `auto_change_password` (Boolean)
- `auto_change_ssh_key` (Boolean)
- `certificate_validity` (String)
- `checkout_policy` (String)
- `description` (String)
- `services` (Set of String)

### Read-Only

- `credentials` (List of Object) (see [below for nested schema](#nestedatt--credentials))
- `domain_password_change` (Boolean)
- `id` (String) The ID of this resource.

<!-- markdownlint-disable-next-line MD033 -->
<a id="nestedatt--credentials"></a>

### Nested Schema for `credentials`

Read-Only:

- `id` (String)
- `public_key` (String)
- `type` (String)

## Usage Notes

### Account Management

Local domain accounts are specific to a device and its local domain.

### Prerequisites

Before creating a device local domain account:

1. Create the device: `wallix-bastion_device`
2. Create the local domain: `wallix-bastion_device_localdomain`

### Authentication Methods

**Password Authentication:**

- Use `auto_change_password = true` for managed passwords
- Requires password change capability on the domain

**SSH Key Authentication:**

- Use `auto_change_ssh_key = true` for managed SSH keys
- Requires SSH CA configuration on the domain

**Certificate Authentication:**

- Configure `certificate_validity` (e.g., "30d", "7d", "1h")
- Use `can_edit_certificate_validity = true` for user control

### Service Configuration

Specify supported protocols in the `services` array:

- **ssh**: Secure Shell protocol
- **telnet**: Telnet protocol
- **rlogin**: Remote login
- **vnc**: Virtual Network Computing
- **rdp**: Remote Desktop Protocol
- **sftp**: SSH File Transfer Protocol

### Checkout Policies

Reference checkout policies to control account access:

```terraform
checkout_policy = wallix-bastion_checkout_policy.restricted.policy_name
```

### Security Best Practices

1. **Principle of Least Privilege**: Only grant necessary services
2. **Certificate Validity**: Use short validity periods for certificates
3. **Managed Credentials**: Enable auto-change for passwords/keys
4. **Service Limitation**: Restrict to required protocols only

### Account Relationship

```text
Device → Device Local Domain → Device Local Domain Account
  ↓           ↓                        ↓
Server1 → local_domain → admin_account
```

### Common Patterns

**Administrator Accounts:**

```terraform
resource "wallix-bastion_device_localdomain_account" "admin" {
  account_name = "Administrator"
  account_login = "admin"
  services = ["rdp", "ssh"]
  auto_change_password = true
}
```

**Service Accounts:**

```terraform
resource "wallix-bastion_device_localdomain_account" "service" {
  account_name = "Service Account"
  account_login = "svc_app"
  services = ["ssh"]
  certificate_validity = "1h"
}
```

**Database Accounts:**

```terraform
resource "wallix-bastion_device_localdomain_account" "dba" {
  account_name = "Database Admin"
  account_login = "dba"
  services = ["ssh", "telnet"]
  checkout_policy = "database_access"
}
```

## Import

Device localdomain account can be imported using an id made up of `<device_id>/<domain_id>/<account_name>`, e.g.

```shell
terraform import wallix-bastion_device_localdomain_account.admin xxxxxxxx/yyyyyyyy/administrator
```
